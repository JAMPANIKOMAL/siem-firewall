<!DOCTYPE html>
<html>

<head>
    <title>Python Firewall Dashboard</title>

    <!-- ‚úÖ Add DataTables CSS -->
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css">

    <style>
        body {
            font-family: Arial;
            background-color: #0d1117;
            color: #f0f6fc;
            padding: 20px;
        }

        h1 {
            color: #58a6ff;
        }

        table.dataTable thead th {
            color: #fff;
            background-color: #161b22;
        }

        .filter-input,
        .filter-select,
        .filter-btn {
            padding: 8px 12px;
            margin-right: 10px;
            border: 1px solid #30363d;
            border-radius: 6px;
            background-color: #161b22;
            color: #f0f6fc;
            font-size: 14px;
        }

        .filter-input:focus,
        .filter-select:focus {
            outline: none;
            border-color: #58a6ff;
            box-shadow: 0 0 0 2px rgba(88, 166, 255, 0.3);
        }

        .filter-btn {
            background-color: #238636;
            border: none;
            cursor: pointer;
            transition: background 0.2s ease;
        }

        .filter-btn:hover {
            background-color: #2ea043;
        }
    </style>
</head>

<!-- ‚úÖ Add jQuery + DataTables -->
<script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
<script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>

<script>
    $(document).ready(function () {
        $('#logTable').DataTable({
            pageLength: 25,
            order: [[0, "desc"]],
            language: {
                searchPlaceholder: "Search logs..."
            }
        });
    });
</script>


<body>
    <h1>üî• Python Firewall Log Dashboard</h1>
    <form method="get" style="margin-bottom: 20px;">
        <input type="text" name="query" placeholder="Search IP or Protocol" value="{{ query }}" class="filter-input">

        <select name="action" class="filter-select">
            <option value="">All</option>
            <option value="ALLOWED" {% if filter_action=='ALLOWED' %}selected{% endif %}>ALLOWED</option>
            <option value="BLOCKED" {% if filter_action=='BLOCKED' %}selected{% endif %}>BLOCKED</option>
        </select>

        <button type="submit" class="filter-btn">üîç Search</button>
    </form>


    <table id="logTable" class="display">
        <thead>
            <tr>
                <th>ID</th>
                <th>Time</th>
                <th>Source IP</th>
                <th>Destination IP</th>
                <th>Protocol</th>
                <th>Action</th>
                <th>Reason</th>
            </tr>
        </thead>
        <tbody>
            {% for log in logs %}
            <tr>
                <td>{{ log[0] }}</td>
                <td>{{ log[1] }}</td>
                <td>{{ log[2] }}</td>
                <td>{{ log[3] }}</td>
                <td>{{ log[4] }}</td>
                <td>{{ log[5] }}</td>
                <td>{{ log[6] }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

</body>

</html>